# yaml-language-server: $schema=https://raw.githubusercontent.com/nf-core/modules/master/subworkflows/yaml-schema.json
name: "vcf_impute_glimpse"
description: Impute VCF/BCF files with Glimpse
keywords:
  - glimpse
  - chunk
  - phase
  - ligate
components:
  - glimpse/chunk
  - glimpse/phase
  - glimpse/ligate
  - bcftools/index
input:
  - ch_vcf:
      description: Channel with target VCF files
      structure:
        - meta:
          type: map
          description: Metadata map
        - vcf:
          type: file
          description: VCF file
          pattern: "*.{vcf,bcf,vcf.gz}"
        - index:
          type: file
          description: VCF index file
          pattern: "*.{tbi,csi}"
        - infos:
          type: file
          description: |
            File containing ploidy information of each sample
          pattern: "*.{txt, tsv}"
  - ch_ref:
      description: Channel with reference phased VCF files
      structure:
        - meta:
          type: map
          description: Metadata map
        - vcf:
          type: file
          description: VCF file
          pattern: "*.{vcf,bcf,vcf.gz}"
        - index:
          type: file
          description: VCF index file
          pattern: "*.{tbi,csi}"
        - region:
          type: string
          description: Region to perform chunking on
          pattern: "[chr]+[0-9]+:[0-9]+-[0-9]+"
  - ch_chunks:
      description: Channel with chunks data
      structure:
        - meta:
          type: map
          description: Metadata map that will be combined with the input data map
        - regionin:
          type: string
          description: Chunk region without buffer
          pattern: "[chr]+[0-9]+:[0-9]+-[0-9]+"
        - regionout:
          type: string
          description: Chunk region with buffer
          pattern: "[chr]+[0-9]+:[0-9]+-[0-9]+"
  - ch_map:
      description: Channel with genetic map data (optional)
      structure:
        - meta:
          type: map
          description: Metadata map
        - map:
          type: file
          description: Map file in GLIMPSE format
          pattern: "*.map"
  - chunk:
      type: boolean
      description: Whether to perform chunking of the input data before imputation.
output:
  - chunks:
      type: file
      description: |
        Tab delimited output txt file containing buffer and imputation regions.
        Structure: [meta, txt]
  - merged_variants:
      type: file
      description: |
        Output phased VCF/BCF file for the merged regions.
        Phased information (HS field) is updated accordingly for the full region.
        Structure: [ val(meta), bcf ]
  - merged_variants_index:
      type: file
      description: |
        Index output of phased VCF/BCF file for the merged regions.
        Structure: [ val(meta), csi ]
  - versions:
      type: file
      description: File containing software versions
      pattern: "versions.yml"
authors:
  - "@LouisLeNezet"
maintainers:
  - "@LouisLeNezet"
