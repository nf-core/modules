# yaml-language-server: $schema=https://raw.githubusercontent.com/nf-core/modules/master/subworkflows/yaml-schema.json
name: "fastq_complexity_filter"
description: |
  Perform low-complexity filtering of FASTQ reads using a selectable tool.
  One of PRINSEQ++, BBDuk, or fastp is executed based on the provided tool name.
  Only complexity filtering is applied; no adapter trimming, read merging, or
  quality trimming is performed.
keywords:
  - fastq
  - complexity filtering
  - low complexity
  - entropy
  - qc
components:
  - prinseqplusplus
  - bbmap/bbduk
  - fastp

input:
  - ch_reads:
      type: file
      description: |
        Input channel containing sample metadata and FASTQ reads.
        Structure: [ val(meta), path(fastq) ]
      pattern: "*.{fastq,fastq.gz}"
  - val_complexity_filter_tool:
      type: string
      description: |
        Complexity filtering tool to use.
        Must be one of: 'prinseqplusplus', 'bbduk', or 'fastp'.

output:
  - filtered_reads:
      type: file
      description: |
        Channel containing complexity-filtered FASTQ reads.
        Structure: [ val(meta), path(fastq) ]
      pattern: "*.{fastq,fastq.gz}"
  - logfile:
      type: file
      description: |
        Tool-specific log files, when available.
        Structure: [ val(meta), path(log) ]
      pattern: "*.log"
  - report:
      type: file
      description: |
        HTML report generated by fastp. Empty for other tools.
        Structure: [ val(meta), path(html) ]
      pattern: "*.html"
  - multiqc_files:
      type: file
      description: |
        Files emitted for MultiQC aggregation (e.g. fastp JSON reports,
        BBDuk logs).
        Structure: [ path(file) ]
      pattern: "*.{json,log}"
  - versions:
      type: file
      description: |
        File containing software versions
        Structure: [ path(versions.yml) ]
      pattern: "versions.yml"

authors:
  - "@vagkaratzas"
maintainers:
  - "@vagkaratzas"
