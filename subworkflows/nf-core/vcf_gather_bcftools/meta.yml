# yaml-language-server: $schema=https://raw.githubusercontent.com/nf-core/modules/master/subworkflows/yaml-schema.json
name: "vcf_gather_bcftools"
description: |
  Concatenate several VCF files using bcftools concat.
  Especially works well with the scatter subworkflows in nf-core.
  An additional option can be given to sort the concatenated VCF.
keywords:
  - concat
  - vcf
  - gather
  - sort
  - bcftools
modules:
  - bcftools/sort
  - bcftools/concat
  - tabix/tabix
input:
  - ch_vcfs:
      description: |
        VCF files and their indices that should be concatenated
        Structure: [ val(meta), path(vcf), path(tbi) ]
  - ch_scatter_count:
      description: |
        A channel containing the scatter count for each input sample
        Structure: [ val(meta), val(gather_count) ]
  - ch_bed:
      type: file(s)
      description: |
        The BED file to be used by bcftools concat
        Structure: [ path(bed) ]
  - val_common_meta:
      type: string
      description: |
        OPTIONAL:
        The string of the common meta to use as the new 'id'.
        Please make sure all VCFs that need to be concatenated have the same value in the
        the meta field specified. (and that only the ID is different between these files)
  - val_sort:
      type: boolean
      description: |
        Whether or not to sort the output VCF,
        this can be useful if this subworkflow isn't used in a scatter/gather workflow
output:
  - vcf:
      description: |
        The concatenated (and possible sorted) VCF file
        Structure: [ val(meta), path(vcf) ]
  - tbi:
      description: |
        The indices of the output VCFs
        Structure: [ val(meta), path(tbi) ]
  - versions:
      type: file
      description: File containing software versions
      pattern: "versions.yml"
authors:
  - "@nvnieuwk"
