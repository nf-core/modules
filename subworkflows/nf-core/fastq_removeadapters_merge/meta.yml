# yaml-language-server: $schema=https://raw.githubusercontent.com/nf-core/modules/master/subworkflows/yaml-schema.json
name: "fastq_removeadapters_merge"
description: Remove adapters and merge reads based on various module choices
keywords:
  - adapters
  - removal
  - short reads
  - merge
  - trim
components:
  - trimmomatic
  - cutadapt
  - trimgalore
  - bbmap/bbduk
  - leehom
  - fastp
  - adapterremoval
input:
  - ch_reads:
      type: file
      description: |
        List of FastQ files of size 1 and 2 for single-end and paired-end data, respectively.
        Structure: [ val(meta), [ path(reads) ] ]
  - skip_trimmomatic:
      type: boolean
      description: |
        If true, skips the trimmomatic process.
  - skip_cutadapt:
      type: boolean
      description: |
        If true, skips the cutadapt process.
  - skip_trimgalore:
      type: boolean
      description: |
        If true, skips the trimgalore process.
        We suggest running either cutadapt or trimgalore,
        because trimgalore also runs cutadapt in the background.
  - skip_bbduk:
      type: boolean
      description: |
        If true, skips the bbmap/bbduk process.
  - contaminants:
      type: file
      description: |
        Reference files used by bbmap/bbduk and/or fastp, containing adapter and/or contaminant sequences for removal
  - skip_leehom:
      type: boolean
      description: |
        If true, skips the leehom process.
  - skip_fastp:
      type: boolean
      description: |
        If true, skips the fastp process.
  - fastp_discard_trimmed_pass:
      type: boolean
      description: |
        Specify true to not write any reads that pass trimming thresholds from the fastp process.
        This can be used to use fastp for the output report only.
  - fastp_save_trimmed_fail:
      type: boolean
      description: |
        Specify true to save files that failed to pass fastp trimming thresholds
        ending in `*.fail.fastq.gz`
  - save_merged:
      type: boolean
      description: |
        Specify true to save all merged reads to a file ending in `*.merged.fastq.gz`
        Used by fastp
  - skip_adapterremoval:
      type: boolean
      description: |
        If true, skips the adapterremoval process.
  - text_adapters:
      type: file
      description: Optional text file containing list of adapters to look for for removal
        with one adapter per line. Otherwise will look for default adapters (see AdapterRemoval
        man page), or can be modified to remove user-specified adapters via ext.args.
output:
  - reads:
      type: file
      description: The trimmed/modified single or paired end fastq reads
      pattern: "*.fastq.gz"
  - merged_reads:
      type: file
      description: |
        The trimmed/modified fastq reads merged into a single file.
        Only meaningful for paired-end reads.
      pattern: "*.fastq.gz"
  - discarded_reads:
      type: file
      description: |
        All files containing discarded reads throughout the steps.
      pattern: "*.fastq.gz"
  - trimmomatic_trim_log:
      type: file
      description: trimmomatic log file, from the trim_log parameter
      pattern: "*.log"
  - trimmomatic_summary:
      type: file
      description: trimmomatic summary file of surviving and dropped reads
      pattern: "*.summary"
  - trimgalore_log:
      type: file
      description: |
        trimgalore log file
      pattern: "*_report.txt"
  - trimgalore_html:
      type: file
      description: |
        fastqc HTML output if run with the --fastqc flag.
      pattern: "*_fastqc.html"
  - trimgalore_zip:
      type: file
      description: |
        fastqc zip output if run with the --fastqc flag.
      pattern: "*_fastqc.zip"
  - fastp_html:
      type: file
      description: fastp results in HTML format
      pattern: "*.html"
  - fastp_log:
      type: file
      description: fastp fastq log file
      pattern: "*.log"
  - adapterremoval_paired_interleaved:
      type: file
      description: |
        Write paired-end reads to a single file, interleaving mate 1 and mate 2 reads
      pattern: "*.paired.fastq.gz"
  - versions:
      type: file
      description: |
        File containing software versions
        Structure: [ path(versions.yml) ]
      pattern: "versions.yml"
  - multiqc_files:
      type: file
      description: MultiQC-compatible output files from tools used in preprocessing
authors:
  - "@kornkv"
  - "@vagkaratzas"
maintainers:
  - "@kornkv"
  - "@vagkaratzas"
