nextflow_workflow {

    name "Test Workflow UTILS_REFERENCES"
    script "../main.nf"
    workflow "UTILS_REFERENCES"

    test("Without params") {

        when {
            workflow {
                """
                input[0] = https://github.com/nf-core/references-assets/blob/main/genomes/Homo_sapiens/test/GRCh38_chr22.yml
                input[1] = []
                input[2] = []
                input[3] = 'fasta'
                input[4] = 'species'
                input[5] = 'https://raw.githubusercontent.com/nf-core/'
                """
            }
        }

        then {
            assert workflow.success
            assert snapshot(workflow.out).match()
        }
    }

    test("With params") {

        when {
            workflow {
                """
                input[0] = https://github.com/nf-core/references-assets/blob/main/genomes_no_base/Homo_sapiens/test/GRCh38_chr22.yml
                input[1] = 'https://raw.githubusercontent.com/nf-core/test-datasets/modules/data/genomics/homo_sapiens/genome/chr21/sequence/genome.fasta'
                input[2] = 'WBCel235'
                input[3] = 'fasta'
                input[4] = 'species'
                input[5] = 'https://raw.githubusercontent.com/nf-core/'
                """
            }
        }

        then {
            assert workflow.success
            assert snapshot(workflow.out).match()
        }
    }
}
