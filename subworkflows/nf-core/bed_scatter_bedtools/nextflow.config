// IMPORTANT: Add this configuration to your modules.config

process {

    publishDir = { "${params.outdir}/${task.process.tokenize(':')[-1].tokenize('_')[0].toLowerCase()}" }

    withName: ".*BED_SCATTER_BEDTOOLS:GAWK" {
        ext.suffix = "bed" // Specifies the output format for fasta index to bed conversion
        ext.args2 = '\'BEGIN {FS="\t"}; {print \$1 FS "0" FS \$2}\'' // The script used to convert fasta index to bed
    }

    withName: ".*BED_SCATTER_BEDTOOLS:BEDTOOLS_SPLIT" {
        ext.args = {
            [
                "-n ${meta.subwf_scatter_count}", // Specifies the amount of splits that should be done on the BED file
                "--algorithm simple" // Specifies that Bedtools Split should use it's simple algorithm (important to not split on possible variant sites)
            ].join(" ")
        }
    }

}
