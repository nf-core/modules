# yaml-language-server: $schema=https://raw.githubusercontent.com/nf-core/modules/master/subworkflows/yaml-schema.json
name: "fastq_decontaminate_deacon_hostile"
description: Decontaminate FastQ files by filtering reads that match a reference genome using Deacon or Hostile
keywords:
  - hostile
  - deacon
  - filter
  - index
  - fasta
  - fastq
  - genome
  - reference
  - minimizer
  - decontamination
components:
  - hostile/fetch
  - hostile/clean
  - samtools/sort
  - samtools/index
  - fastq_fetch_clean_hostile
  - fastq_index_filter_deacon
input:
  - ch_reads:
      type: file
      description: |
        List of FastQ files of size 1 and 2 for single-end and paired-end data, respectively.
        Structure: [ val(meta), [ path(reads) ] ]
  - ch_fasta:
      type: file
      description: |
        Input genome fasta file used by Deacon.
        Structure: [ val(meta), [ path(fasta) ] ]
  - ch_reference:
      type: directory
      description: |
        Directory containing index file(s) corresponding to the preferred aligner (bowtie2 short reads or minimap for long reads) used by Hostile.
        Note that single end data is assumed to be long reads. If you have single-end short read you must supply both the BowTie2
        indices AND explicitly specify `--aligner bowtie2`
  - index_name:
      type: string
      description: Name of the reference genome index to download for Hostile fetch if the reference is not provided.
  - decontaminator:
      type: string
      description: Name of the deacontamination tool to use. Either 'deacon' or 'hostile'.
output:
  - fastq_filtered:
      type: file
      description: |
        List of output filtered FastQ files of size 1 and 2 for single-end and paired-end data, respectively.
        Structure: [ val(meta), path(${prefix}*.fq.gz) ]
      pattern: "*.fq.gz"
  - additional_files:
      type: channel
      description: |
        Additional output files depending on the decontamination tool used.
        Structure: [ val(meta), path(${prefix}*.json), path(index) ] if Deacon is used
        Structure: [ al(reference_name), path(reference_dir), val(meta), path(*.json) ] if Hostile is used
  - versions:
      type: file
      description: |
        File containing software versions
        Structure: [ path(versions.yml) ]
      pattern: "versions.yml"
authors:
  - "@Baksic-Ivan"
maintainers:
  - "@Baksic-Ivan"
