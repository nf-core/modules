# yaml-language-server: $schema=https://raw.githubusercontent.com/nf-core/modules/master/subworkflows/yaml-schema.json
name: bam_create_som_pon_gatk
description: Perform variant calling on a set of normal samples using mutect2 panel
  of normals mode. Group them into a genomicsdbworkspace using genomicsdbimport, then
  use this to create a panel of normals using createsomaticpanelofnormals.
keywords:
  - gatk4
  - mutect2
  - genomicsdbimport
  - createsomaticpanelofnormals
  - variant_calling
  - genomicsdb_workspace
  - panel_of_normals
components:
  - gatk4/mutect2
  - gatk4/genomicsdbimport
  - gatk4/createsomaticpanelofnormals
input:
  - ch_mutect2_in:
      description: An input channel containing the following files
      structure:
        - meta:
            type: map
            description: groovy map
        - input:
            type: file
            description: "BAM/CRAM file"
        - input_index:
            type: file
            description: "Index of BAM/CRAM file"
        - interval_file:
            type: file
            description: "Interval file to be used with the mutect call"
  - ch_fasta:
      description: "The reference fasta file"
      structure:
        - meta:
            type: map
            description: groovy map
        - fasta:
            type: file
            description: "The reference fasta file"
  - ch_fai:
      description: "Index of reference fasta file"
      structure:
        - meta:
            type: map
            description: groovy map
        - fai:
            type: file
            description: "Index of reference fasta file"
  - ch_dict:
      description: "GATK sequence dictionary"
      structure:
        - meta:
            type: map
            description: groovy map
        - dict:
            type: file
            description: "GATK sequence dictionary"
  - val_pon_norm:
      type: string
      description: "name for panel of normals"
  - ch_gendb_intervals:
      description: "channel with interval file"
      structure:
        - interval_file:
            type: file
            description: "Interval file"
output:
  - versions:
      description: File containing software versions
      structure:
        - versions:
            type: file
            description: "File containing software versions"
            pattern: "versions.yml"
  - mutect2_vcf:
      description: List of compressed vcf files to be used to make the gendb workspace
      structure:
        - meta:
            type: map
            description: groovy map
        - vcf:
            type: file
            description: "Compressed vcf file"
            pattern: "*.vcf.gz"
  - mutect2_index:
      description: List of indexes of mutect2_vcf files
      structure:
        - meta:
            type: map
            description: groovy map
        - tbi:
            type: file
            description: "Index of vcf file"
            pattern: "*.vcf.gz.tbi"
  - mutect2_stats:
      description: List of stats files that pair with mutect2_vcf files
      structure:
        - meta:
            type: map
            description: groovy map
        - stats:
            type: file
            description: "Stats file"
            pattern: "*vcf.gz.stats"
  - genomicsdb:
      description: Directory containing the files that compose the genomicsdb workspace.
      structure:
        - meta:
            type: map
            description: groovy map
        - genomicsdb:
            type: directory
            description: "GenomicsDB workspace"
  - pon_vcf:
      description: Panel of normal as compressed vcf file
      structure:
        - meta:
            type: map
            description: groovy map
        - vcf:
            type: file
            description: "Compressed vcf file"
            pattern: "*.vcf.gz"
  - pon_index:
      description: Index of pon_vcf file
      structure:
        - meta:
            type: map
            description: groovy map
        - tbi:
            type: file
            description: "Index of vcf file"
            pattern: "*vcf.gz.tbi"
authors:
  - "@GCJMackenzie"
maintainers:
  - "@GCJMackenzie"
