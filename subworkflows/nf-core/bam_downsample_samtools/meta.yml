# yaml-language-server: $schema=https://raw.githubusercontent.com/nf-core/modules/master/subworkflows/yaml-schema.json
name: "bam_downsample_samtools"
description: Downsample a BAM/CRAM/SAM file using samtools to a given depth
keywords:
  - downsample
  - bam
  - sam
  - cram
components:
  - samtools/depth
  - samtools/view
  - gawk
input:
  - ch_bam:
      type: file
      description: |
        The input channel containing the BAM/CRAM/SAM files and their indexes and the depth at which to downsample them.
        Structure: [ val(meta), path(bam), path(bai), val(depth) ]
      pattern: "*.{bam,cram,sam}"
  - ch_fasta:
      type: file
      description: |
        The reference genome channel containing the fasta files and its index
        Structure: [ val(meta), path(fasta), path(fai) ]
      pattern: "*.{fa(sta)?}"
output:
  - bam_downsampled:
      type: file
      description: |
        Channel containing downsampled BAM files and their indexes
        Structure: [ val(meta), path(bam), path(bai) ]
      pattern: "*.bam"
  - versions:
      type: file
      description: |
        File containing software versions
        Structure: [ path(versions.yml) ]
      pattern: "versions.yml"
authors:
  - "@louislenezet"
maintainers:
  - "@louislenezet"
