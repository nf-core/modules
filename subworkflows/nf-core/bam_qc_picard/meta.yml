# yaml-language-server: $schema=https://raw.githubusercontent.com/nf-core/modules/master/subworkflows/yaml-schema.json
name: bam_qc_picard
description: Produces comprehensive statistics from BAM file
keywords:
  - statistics
  - counts
  - hs_metrics
  - wgs_metrics
  - bam
  - sam
  - cram
components:
  - picard/collectmultiplemetrics
  - picard/collectwgsmetrics
  - picard/collecthsmetrics
input:
  - ch_bam_bai_bait_target:
      description: "channel containing input bam files"
      structure:
        - meta:
            type: map
            description: "groovy map"
        - bam:
            type: file
            description: "bam/cram/sam file"
            pattern: "*.{bam,cram,sam}"
        - bai:
            type: file
            description: "bam/cram/sam index file"
            pattern: "*.{bai,crai,sai}"
        - bait_interval:
            type: file
            description: An interval list or bed file that contains the locations of the baits used. (optional)
            pattern: "baits.{interval_list,bed,bed.gz}"
        - target_interval:
            type: file
            description: An interval list or bed file that contains the locations of the targets. (optional)
            pattern: "targets.{interval_list,bed,bed.gz}"
  - ch_fasta:
      description: "channel containing fasta file"
      structure:
        - meta:
            type: map
            description: "groovy map"
        - fasta:
            type: file
            description: "reference FASTA file"
            pattern: "*.{fasta,fa,fna}"
  - ch_fasta_fai:
      description: "channel containing fasta index file"
      structure:
        - meta:
            type: map
            description: "groovy map"
        - fasta_fai:
            type: file
            description: "reference FASTA index file"
            pattern: "*.{fasta,fa,fna}.fai"
  - ch_fasta_dict:
      description: "channel containing fasta dict file"
      structure:
        - meta:
            type: map
            description: "groovy map"
        - fasta_dict:
            type: file
            description: "Reference fasta sequence dictionary"
            pattern: "*.{dict}"
output:
  - coverage_metrics:
      description: Alignment metrics files generated by picard CollectWgsMetrics
      structure:
        - meta:
            type: map
            description: groovy map
        - coverage_metrics:
            type: file
            description: Alignment metrics files generated by picard CollectHsMetrics or CollectWgsMetrics
            pattern: "*_metrics.txt"
  - multiple_metrics:
      description: Alignment metrics files generated by picard CollectMultipleMetrics
      structure:
        - meta:
            type: map
            description: groovy map
        - multiple_metrics:
            type: file
            description: Alignment metrics files generated by picard CollectMultipleMetrics
            pattern: "*_{metrics}"
  - versions:
      description: File containing software versions
      structure:
        - versions:
            type: file
            description: File containing software versions
            pattern: "versions.yml"
authors:
  - "@matthdsm"
maintainers:
  - "@matthdsm"
