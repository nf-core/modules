name: "propr_propd"
description: Perform differential proportionality analysis
keywords:
  - differential
  - proportionality
  - logratio
  - expression
  - propr

tools:
  - "propr":
      description: "Logratio methods for omics data"
      homepage: "https://github.com/tpq/propr"
      documentation: "https://rdrr.io/cran/propr/man/propr.html"
      tool_dev_url: "https://github.com/tpq/propr"
      doi: "10.1038/s41598-017-16520-0"
      licence: ["GPL-2"]

input:
  - meta:
      type: map
      description: |
        Groovy Map containing sample information.
        This can be used at the workflow level to pass optional parameters to the module. 
        [id: 'test', ...]
  - count:
      type: file
      description: |
        Count matrix, where rows = variables or genes, columns = samples or cells. 
        This matrix should not contain zeros. One should plug this module after another one that handles the zeros.
      pattern: "*.{csv,tsv}"
  - metric:
      type: string
      description: |
        (Optional) Differential proportionality metric 'theta_d' or 'theta_e' or 'theta_f'. Default = theta_d
  - alpha:
      type: float
      description: |
        (Optional) Alpha parameter for Box-Cox transformation. Default = null, standard log transformation is applied to the ratios.
  - permutation:
      type: integer
      description: |
        (Optional) Number of permutation cycles to calculate FDR. Default = 0, no permutation.
  - cutoff_min:
      type: float
      description: |
        (Optional) Minimun FDR cutoff to test.
  - cutoff_max:
      type: float
      description: |
        (Optional) Maximun FDR cutoff to test.
  - cutoff_interval:
      type: float
      description: |
        (Optional) Step between each cutoff.
  - meta2:
      type: map
      description: |
        Groovy map containing study-wide metadata related to the sample sheet and matrix
  - samplesheet:
      type: file
      description: |
        CSV or TSV format sample sheet with sample metadata
  - grouping_var:
      type: string
      description: |
        (Optional) Variable from the sample sheet that can be used to define groups. Default = treatment.

output:
  - meta:
      type: map
      description: |
        Groovy Map containing sample information.
        This can be used at the workflow level to pass optional parameters to the module. 
        [id: 'test', ...]
  - results:
      type: file
      description: Results table
      pattern: "*.propd.tsv"
  - fdr:
      type: file
      description: (optional) propr fdr table
      pattern: "*.fdr.tsv"
  - session_info:
      type: file
      description: dump of R SessionInfo
      pattern: "*.R_sessionInfo.log"
  - versions:
      type: file
      description: File containing software versions
      pattern: "versions.yml"

authors:
  - "@suzannejin"
