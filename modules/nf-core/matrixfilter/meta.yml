name: "matrixfilter"
description: filter a matrix based on a minimum value and numbers of samples
  that must pass.
keywords:
  - matrix
  - filter
tools:
  - "matrixfilter":
      description: "filter a matrix based on a minimum value and numbers of samples"

input:
  - meta:
      type: map
      description: |
        Groovy Map containing information on experiment, at a minimum an id.
        e.g. [ id:'test' ]
  - samplesheet:
      type: file
      description: |
        CSV or TSV format sample sheet with sample metadata
  - abundance:
      type: file
      description: |
        Raw TSV or CSV format expression matrix as output from the nf-core RNA-seq workflow
  - minimum_abundance:
      type: numeric
      description: |
        Minimum abundance value, supplied via task.ext.args as --minimum_abundance
      default: 1
  - minimum_samples:
      type: numeric
      description: |
        Minimum samples that must pass the threshold to retain the row/ feature
        (e.g. gene). Supplied via task.ext.args as --minimum_samples
      default: 1
  - minimum_proportion:
      type: numeric
      description: |
        A minimum proportion of samples that must pass the threshold. Supplied
        via task.ext.args as --minimum_proportion. Overrides minimum_samples
      default: 0
  - grouping_variable:
      type: string
      description: Supply a variable from the sample sheet that can be used to define
        groups and derive a minimum group size upon which to base minimum
        sample numbers. The rationale being to allow retention of features that
        might be present in only one group. Supplied via task.ext.args as
        --grouping_variable

output:
  - versions:
      type: file
      description: File containing software versions
      pattern: "versions.yml"
  - meta:
      type: map
      description: |
        Groovy Map containing information on experiment.
        e.g. [ id:'test' ]
  - filtered:
      type: file
      description: Filtered version of input matrix
      pattern: "*.filtered.tsv"

authors:
  - "@pinin4fjords"
