name: ampcombi
description: A tool to parse and summarise results from antimicrobial peptides tools and present functional classification.
keywords:
  - antimicrobial peptides
  - amps
  - parsing
  - reporting
  - align
  - macrel
  - amplify
  - hmmsearch
  - neubi
  - ampir
  - DRAMP
tools:
  - ampcombi:
      description: "This tool parses the results of amp prediction tools into a single table and aligns the hits against a reference database of antimicrobial peptides for functional classifications."
      homepage: "https://github.com/Darcy220606/AMPcombi"
      documentation: "https://github.com/Darcy220606/AMPcombi"
      tool_dev_url: "https://github.com/Darcy220606/AMPcombi/tree/dev"

      licence: "['MIT']"

input:
  - meta:
      type: map
      description: |
        Groovy Map containing sample information
        e.g. [ id:'test', single_end:false ]
  - amp_input:
      type: folder or filelist
      description: The path to the directory containing the results for the AMP tools for each sample processed or a list of files corresponding to each file generated by AMP tools.
  - faa_input:
      type: folder or file
      description: The path to the folder or file corresponding to the respective protein fasta files with '.faa' extension. Filenames have to contain the corresponding sample-name, i.e. sample_1.faa
      pattern: "*/"
  - amp_database:
      type: directory
      description: The path to the folder containing the fasta and tsv database files.
      pattern: "*/"

output:
  - meta:
      type: map
      description: |
        Groovy Map containing sample information
        e.g. [ id:'test', single_end:false ]
  - versions:
      type: file
      description: File containing software versions
      pattern: "versions.yml"
  - txt:
      type: file
      description: An alignment file containing the results from the DIAMOND alignment step done on all AMP hits.
      pattern: "/*/*_diamond_matches.txt"
  - csv:
      type: file
      description: A file containing the summary report of all predicted AMP hits from all AMP tools given as input and the corresponding taxonomic and functional classification from the alignment step.
      pattern: "/*/*_ampcombi.csv"
  - faa:
      type: file
      description: A fasta file containing the amino acid sequences of all predicted AMP hits.
      pattern: "/*/*_amp.faa"
  - log:
      type: file
      description: A log file that captures the standard output ina log file. Can be activated by `--log`.
      pattern: "*.log"
  - sample_dir:
      type: directory
      description: The output directory that contains the summary output and related alignment files for one sample.
      pattern: "/*"
  - results_db:
      type: directory
      description: If the AMP reference database is not provided by the user using the flag `--amp_database', by default the DRAMP database will be downloaded, filtered and stored in this folder.
      pattern: "/amp_ref_database"
  - results_db_fasta:
      type: file
      description: AMP reference database fasta file, cleaned of diamond-uncompatible characters.
      pattern: "/amp_ref_database/*.clean.fasta"
  - results_db_dmd:
      type: file
      description: AMP reference database converted to DIAMOND database format.
      pattern: "/amp_ref_database/*.dmnd"
  - results_db_tsv:
      type: file
      description: AMP reference database in tsv-format with two columns containing header and sequence.
      pattern: "/amp_ref_database/*.tsv"
  - summary_csv:
      type: file
      description: A file that concatenates all samples ampcombi summaries. This is activated with `--complete_summary true`.
      pattern: "AMPcombi_summary.html"
  - summary_html:
      type: file
      description: A file that concatenates all samples ampcombi summaries. This is activated with `--complete_summary true`.
      pattern: "AMPcombi_summary.html"

authors:
  - "@darcy220606"
  - "@louperelo"
