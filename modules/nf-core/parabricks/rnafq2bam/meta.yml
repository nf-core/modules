name: parabricks_rnafq2bam
description: This tool is the equivalent of fq2bam for RNA-Seq samples,
  receiving inputs in FASTQ format, performing alignment with the splice-aware
  STAR algorithm, optionally marking of duplicate reads, and outputting an
  aligned BAM file ready for variant and fusion calling.
keywords:
  - align
  - star
  - rna
tools:
  - "parabricks":
      description: "NVIDIA Clara Parabricks GPU-accelerated genomics tools"
      homepage: "https://www.nvidia.com/en-us/clara/genomics/"
      documentation: "https://docs.nvidia.com/clara/parabricks/latest/index.html"
      licence:
        - "https://docs.nvidia.com/clara/parabricks/latest/eula.html"
      identifier: ""
input:
  - - meta:
        type: map
        description: |
          Groovy Map containing sample information
          e.g. [ id:'test', single_end:false ]
    - reads:
        type: file
        description: fastq.gz files
        pattern: "*.fastq.gz"
        ontologies:
          - edam: http://edamontology.org/format_3989
          - edam: http://edamontology.org/format_1930
  - - meta2:
        type: map
        description: |
          Groovy Map containing fasta information
    - fasta:
        type: file
        description: reference fasta file - must be unzipped
        pattern: "*.fasta"
        ontologies:
          - edam: http://edamontology.org/format_1929
  - - meta3:
        type: map
        description: |
          Groovy Map containing genome lib dir information
    - index:
        type: directory
        description: Path to a genome resource library directory. The indexing
          required to run STAR should be completed by the user beforehand.
        pattern: "*"
        ontologies: []
  - qc_metrics:
      type: boolean
      description: Optionally report QC metrics
  - mark_duplicates:
      type: boolean
      description: Optionally mark duplicates
output:
  log_final:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - ${prefix}.Log.final.out:
          type: file
          description: STAR log final out file
          pattern: "*Log.final.out"
          ontologies: []
  log_out:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - ${prefix}.Log.out:
          type: file
          description: STAR log out file
          pattern: "*Log.out"
          ontologies: []
  log_progress:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - ${prefix}.Log.progress.out:
          type: file
          description: STAR log progress out file
          pattern: "*Log.progress.out"
          ontologies: []
  bam:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - ${prefix}.bam:
          type: file
          description: Output BAM file containing read alignments
          pattern: "*.{bam}"
          ontologies: []
  bai:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - ${prefix}.bam.bai:
          type: file
          description: Output BAM index file
          pattern: "*.{bam}.{bai}"
          ontologies: []
  bam_sorted:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - "*.sortedByCoord.out.bam":
          type: file
          description: Output BAM file of read alignments sorted by coordinate
            (optional)
          pattern: "*.sortedByCoord.out.bam"
          ontologies: []
  bam_sorted_aligned:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - "*.Aligned.sortedByCoord.out.bam":
          type: file
          description: Output BAM file of read alignments sorted by coordinate
            (optional)
          pattern: "*.Aligned.sortedByCoord.out.bam"
          ontologies: []
  bam_transcript:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - "*toTranscriptome.out.bam":
          type: file
          description: Output BAM file of transcriptome alignment (optional)
          pattern: "*toTranscriptome.out.bam"
          ontologies: []
  bam_unsorted:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - "*Aligned.unsort.out.bam":
          type: file
          description: Unsorted BAM file of read alignments (optional)
          pattern: "*Aligned.unsort.out.bam"
          ontologies: []
  fastq:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - "*fastq.gz":
          type: file
          description: Unmapped FastQ files (optional)
          pattern: "*fastq.gz"
          ontologies:
            - edam: http://edamontology.org/format_3989
  tab:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - "*.tab":
          type: file
          description: STAR output tab file(s) (optional)
          pattern: "*.tab"
          ontologies:
            - edam: http://edamontology.org/format_3475
  spl_junc_tab:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - "*.SJ.out.tab":
          type: file
          description: STAR output splice junction tab file
          pattern: "*.SJ.out.tab"
          ontologies:
            - edam: http://edamontology.org/format_3475
  read_per_gene_tab:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - "*.ReadsPerGene.out.tab":
          type: file
          description: STAR output read per gene tab file
          pattern: "*.ReadsPerGene.out.tab"
          ontologies:
            - edam: http://edamontology.org/format_3475
  junction:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - "*.out.junction":
          type: file
          description: STAR chimeric junction output file (optional)
          pattern: "*.out.junction"
          ontologies: []
  sam:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - "*.out.sam":
          type: file
          description: STAR output SAM file(s) (optional)
          pattern: "*.out.sam"
          ontologies: []
  wig:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - "*.wig":
          type: file
          description: STAR output wiggle format file(s) (optional)
          pattern: "*.wig"
          ontologies: []
  bedgraph:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - "*.bg":
          type: file
          description: STAR output bedGraph format file(s) (optional)
          pattern: "*.bg"
          ontologies: []
  qc_metrics:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - ${prefix}_qc_metrics:
          type: directory
          description: Directory containing QC metrics output by STAR (optional)
          pattern: "*_qc_metrics"
          ontologies: []
  duplicate_metrics:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. [ id:'test', single_end:false ]
      - ${prefix}.duplicate-metrics.txt:
          type: file
          description: File containing duplicate metrics output by STAR (optional)
          pattern: "*.duplicate-metrics.txt"
          ontologies: []
  versions_parabricks:
    - - ${task.process}:
          type: string
          description: The name of the process
      - parabricks:
          type: string
          description: The name of the tool
      - "pbrun version 2>&1 | grep -Po '(?<=^pbrun: ).*'":
          type: eval
          description: The expression to obtain the version of the tool
topics:
  versions:
    - - ${task.process}:
          type: string
          description: The name of the process
      - parabricks:
          type: string
          description: The name of the tool
      - "pbrun version 2>&1 | grep -Po '(?<=^pbrun: ).*'":
          type: eval
          description: The expression to obtain the version of the tool
authors:
  - "@gburnett-nvidia"
maintainers:
  - "@gburnett-nvidia"
