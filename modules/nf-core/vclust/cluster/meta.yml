# yaml-language-server: $schema=https://raw.githubusercontent.com/nf-core/modules/master/modules/meta-schema.json
name: "vclust_cluster"
description: Vclust cluster performs threshold-based clustering by assigning a genome
  sequence to a cluster if its similarity (e.g., ANI) to the cluster meets or exceeds
  a user-defined threshold.
keywords:
  - cluster
  - virus
  - filter
  - contig
  - scaffold
  - phage
tools:
  - "vclust":
      description: |
        "Fast and accurate tool for calculating ANI and clustering virus
        genomes and metagenomes."
      homepage: "https://afproject.org/vclust/"
      documentation: "https://github.com/refresh-bio/vclust/wiki"
      tool_dev_url: "https://github.com/refresh-bio/vclust"
      doi: "10.1038/s41592-025-02701-7"
      licence: ["GPL v3-or-later"]
      identifier: "biotools:vclust"

input:
  - - meta:
        type: map
        description: |
          Groovy Map containing sample information
          e.g. `[ id:'sample1' ]`
    - tsv:
        type: file
        description: Sorted TSV file, generated by `vclust align`
        pattern: "*.tsv"
        ontologies:
          - edam: "http://edamontology.org/format_3475" # TSV
  - - meta2:
        type: map
        description: |
          Groovy Map containing sample information
          e.g. `[ id:'sample1' ]`
    - ids:
        type: file
        description: TSV file containing sequence IDs and their number of parts, generated
          by `vclust align`
        pattern: "*.ids.tsv"
        ontologies:
          - edam: "http://edamontology.org/format_3475" # TSV
  - metric:
      type: string
      description: |
        Similarity metric for clustering choices: 'tani','gani' or 'ani'
      pattern: "tani|gani|ani"
  - tani:
      type: float
      description: |
        Min. total ANI
  - gani:
      type: float
      description: |
        Min. global ANI
  - ani:
      type: float
      description: |
        Min. ANI

output:
  clusters:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. `[ id:'sample1' ]`
      - "*.tsv":
          type: file
          description: |
            A TSV file with genome identifiers followed by 0-based cluster identifiers.
            The file includes all input genomes, both clustered and singletons, listed in
            the same order as the IDs file (sorted by decreasing sequence length). The first genome
            in each cluster is the representative.
          pattern: "*.tsv"
          ontologies:
            - edam: "http://edamontology.org/format_3475" # TSV

  log:
    - - meta:
          type: map
          description: |
            Groovy Map containing sample information
            e.g. `[ id:'sample1' ]`
      - "*.log":
          type: file
          description: Log file containing the stdout
          pattern: "*.log"
          ontologies: []
  versions:
    - versions.yml:
        type: file
        description: File containing software versions
        pattern: "versions.yml"
        ontologies:
          - edam: http://edamontology.org/format_3750 # YAML
authors:
  - "@Joon-Klaps"
maintainers:
  - "@Joon-Klaps"
