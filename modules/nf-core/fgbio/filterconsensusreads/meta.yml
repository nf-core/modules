name: "fgbio_filterconsensusreads"
description: Uses FGBIO FilterConsensusReads to filter consensus reads generated by CallMolecularConsensusReads or CallDuplexConsensusReads.
keywords:
  - fgbio
  - filter
tools:
  - "fgbio":
      description: "A set of tools for working with genomic and high throughput sequencing data, including UMIs"
      homepage: http://fulcrumgenomics.github.io/fgbio/
      documentation: http://fulcrumgenomics.github.io/fgbio/tools/latest/FilterConsensusReads.html
      tool_dev_url: https://github.com/fulcrumgenomics/fgbio
      doi: ""
      licence: "['MIT']"

input:
  # Only when we have meta
  - meta:
      type: map
      description: |
        Groovy Map containing sample information
        e.g. [ id:'test', single_end:false ]
  #
  - bam:
      type: file
      description: BAM file
      pattern: "*.bam"

  - min_reads:
      type: integer
      description: The minimum number of reads supporting a consensus base/read

  - min_baseq:
      type: double
      description: Mask (make N) consensus bases with quality less than this threshold

  - max_base_error_rate:
      type: double
      description: The maximum error rate for a single consensus base

output:
  - meta:
      type: map
      description: |
        Groovy Map containing sample information
        e.g. [ id:'test', single_end:false ]
  #
  - versions:
      type: file
      description: File containing software versions
      pattern: "versions.yml"
  - bam:
      type: file
      description: Filtered consensus BAM file
      pattern: "*.bam"

authors:
  - "@lescai"
